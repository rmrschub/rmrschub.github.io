<!DOCTYPE html>
<html>
    <head>

        <!-- TensorFlow.js script -->
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.14.1/dist/tf.min.js"></script>
        <script
         src="https://code.jquery.com/jquery-3.3.1.js"
         integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
         crossorigin="anonymous"></script>

        <!-- main script -->
        <script src = "test.js" > </script>
    </head>
    
    <body>
        
        <h1 align="center">PV mini module defect detection</h1>

        <div class="container-fluid"> 
            <blockquote class="blockquote text-justify" style="margin:30px;">
                <p> This is a simple tool that uses Resnet to recognize defecs in ELPV images. The model was trained to recognize  with 2.6k images and it achieves ~80.3% accuracy in detecting defects in PV mini modules.</p>
            </blockquote>
        </div>
        
        <div class="col" style ='margin-left:100px;'>
            <h4 id ='status' >Loading Model... </h4>
        </div>
    
    
        <div class="centered">
            <img id="elpv_image" src="https://github.com/rmrschub/rmrschub.github.io/raw/master/images/cell0001.png" />
            <p id = "Result"></p>
            <p id = "Probability"></p>
            
            <div class="centered">
                <button id="btnPredict" value="submit" onclick = "start()">1. Predict defect</button>
                <button id="btnImg"     value="submit" >2. Load next image</button>
            </div>
        </div>
        
        
        <script type="text/javascript">
            Number.prototype.pad = function(size) {
                var sign = Math.sign(this) === -1 ? '-' : '';
                return sign + new Array(size).concat([Math.abs(this)]).join('0').slice(-size);
            }

            document.getElementById('btnImg').onclick = function() {

                var min = 1;
                var max = 2624;
                var val = Math.floor(Math.random() * (max - min + 1)) + min;
                src = 'https://github.com/rmrschub/rmrschub.github.io/raw/master/images/cell'+ (val).pad(4) + '.png';
                document.getElementById("elpv_image").src = src;
            }
        </script>
        
        

        
        

<!--
    <script> 

     function handleFileSelect(evt) {
       var files = evt.target.files; // FileList object
       // Loop through the FileList and render image files as thumbnails.
       for (var i = 0, f; f = files[i]; i++) {
         // Only process image files.
         if (!f.type.match('image.*')) {
           continue;
         }
         var reader = new FileReader();
         // Closure to capture the file information.
         reader.onload = (function(theFile) {
           return function(e) {
             // Render thumbnail.
             var span = document.createElement('span');
             span.innerHTML = ['<img class="thumb" src="', e.target.result,
                               '" title="', escape(theFile.name), '"/>'].join('');
             document.getElementById('list').insertBefore(span, null);
           };
         })(f);
         // Read in the image file as a data URL.
         reader.readAsDataURL(f);
       }
     }
     document.getElementById('files').addEventListener('change', handleFileSelect, false);
    </script>
 -->
    </body>
</html>